# lab4_refactor

# Лабораторна робота №5: Система обробки платежів


# Тема: Використання шаблонів проектування: Застосування шаблону "Стратегія" з розробкою через тестування (TDD), включаючи модульні та інтеграційні тести.

#Мета: "Навчитись застосовувати шаблон проектування "Стратегія" для реалізації системи з взаємозамінними алгоритмами, керуючись принципами розробки через тестування (TDD) для створення надійного та гнучкого коду, а також перевірити коректність реалізації та взаємодії компонентів за допомогою модульних та інтеграційних тестів."


## Опис

Цей проєкт є реалізацією лабораторної роботи з курсу "Аналіз та рефакторинг коду, моделювання та проєктування ПЗ". Метою проєкту було розробити гнучку систему для обробки платежів з використанням різних платіжних методів, застосовуючи шаблон проєктування "Стратегія", принципи розробки через тестування (TDD), а також реалізувати управління балансами для платіжних рахунків.

Система дозволяє симулювати додавання платіжних інструментів (кредитна картка, PayPal, криптовалютний гаманець), поповнення їх балансів та здійснення платежів з перевіркою достатності коштів.

## Основний функціонал

* **Підтримка декількох платіжних стратегій:**
    * Кредитна картка
    * PayPal
    * Криптовалютний гаманець
* **Управління балансом:**
    * Встановлення початкового балансу для кожного платіжного методу.
    * Можливість поповнення балансу.
    * Автоматична перевірка достатності коштів перед здійсненням платежу.
    * Коректне списання коштів з балансу після успішного платежу.
* **Розрахунок комісії:** Для криптовалютних платежів реалізовано логіку розрахунку комісії.
* **Консольний інтерфейс:** Простий інтерактивний інтерфейс для взаємодії з системою (додавання методів, поповнення, здійснення платежів).
* **Тестування:**
    * Набір модульних тестів для перевірки окремих компонентів.
    * Набір інтеграційних тестів для перевірки взаємодії між компонентами.

## Використані технології

* **Мова програмування:** Python 3.x
* **Фреймворк для тестування:** `pytest`
* **Стандартна бібліотека Python:** модулі `abc` (для абстрактних класів), `re` (для регулярних виразів), `typing` (для анотацій типів).

##
Завдання на виконання лабораторних робіт
•	Опис проблеми: Уявіть, що ви розробляєте модуль для інтернет-магазину, який відповідає за обробку платежів. Система повинна підтримувати різні способи оплати (наприклад, кредитною карткою, через PayPal, криптовалютою). На початковому етапі логіка для всіх типів платежів може бути жорстко прописана, що ускладнює додавання нових методів оплати або зміну існуючих. Ваше завдання – рефакторити (або розробити з нуля, якщо початковий код не надається) систему обробки платежів, використовуючи шаблон "Стратегія", щоб кожен метод оплати був окремою стратегією. Розробка повинна вестися згідно з методологією TDD.
•	Технічні вимоги:
o	Реалізувати систему обробки платежів.
o	Використати шаблон проектування "Стратегія" для реалізації різних методів оплати.
o	Має бути щонайменше три різні стратегії оплати (наприклад, CreditCardPaymentStrategy, PayPalPaymentStrategy, CryptoPaymentStrategy).
o	Кожна стратегія повинна реалізовувати спільний інтерфейс (або успадковуватись від абстрактного класу) з методом, наприклад, pay(amount).
o	Має бути контекстний клас (наприклад, PaymentProcessor), який використовує обрану стратегію для здійснення платежу.
o	Розробка всіх ключових компонентів (стратегій, контексту) повинна супроводжуватися написанням модульних тестів перед написанням основного коду (TDD).
o	Розробити інтеграційні тести, які перевіряють коректну взаємодію класу PaymentProcessor з різними реалізаціями PaymentStrategy.
•	Очікувані результати:
o	Функціональний програмний код, що реалізує систему обробки платежів з використанням шаблону "Стратегія".
o	Чітко розділена логіка для кожного методу оплати.
o	Можливість легко додавати нові методи оплати без зміни існуючого коду контексту.
o	Наявність щонайменше 10 модульних тестів, які покривають: 
	Коректну роботу кожної платіжної стратегії окремо (успішні та неуспішні сценарії, якщо доречно).
	Коректну роботу контекстного класу PaymentProcessor з різними стратегіями (можуть частково перетинатися з інтеграційними, але тут акцент на логіці самого процесора, можливо, з використанням моків для стратегій).
	Обробку граничних випадків (наприклад, нульова сума, недійсна платіжна інформація для конкретної стратегії, якщо це моделюється).
o	Наявність щонайменше 3-5 інтеграційних тестів, які перевіряють: 
	Коректне виконання платіжної операції через PaymentProcessor при використанні кожної конкретної реалізації PaymentStrategy (наприклад, PaymentProcessor + CreditCardPaymentStrategy, PaymentProcessor + PayPalPaymentStrategy і т.д.).
	Правильність зміни стратегії в PaymentProcessor та подальшого виконання платежу з новою стратегією.
o	Усі тести (модульні та інтеграційні) повинні успішно проходити.
![image](https://github.com/user-attachments/assets/97c8c6a9-38db-4630-9f9b-cab65fec5777)
